# Открытие файлов

Наиболее простой способ доступа к файлу связан с использованием системных вызовов read() и write(). Однако прежде, чем к файлу можно будет получить доступ, его требуется открыть с помощью системного вызова open() или creat(). Когда работа с файлом закончена, его нужно закрыть посредством системного вызова close().

## Системный вызов open()

    #include <sys/types.h>
    #include <sys/stat.h>
    #include <fcntl.h>

    int open(const char* name, int flags);
    int open(const char* name, int flags, mode_t mode);

**Флаги для open()**

Флаг | Описание
:----|:-------------------------------------
O_RDONLY | Только чтение
O_WRONLY | Только запись
O_RDWR | Чтение и запись
O_APPEND | Дозапись
O_ASYNC | Асинхронный доступ. Когда указанный файл станет доступным для чтения и записи, генерируется специальный сигнал (по умолчанию SGIIO)
O_CLOEXEC | Задает флаг close-on-exec для открытого файла. 
O_CREAT | Если файл не существует, то он будет создан
O_DIRECT | Непосредственный ввод-вывод
O_DIRECTORY | Открыть каталог
O_EXCL | При указании с O_CREAT этот флаг предотвратит срабатывание вызова open(), если файл уже существует.
O_LARGEFILE | 64-битные смещения
O_NOATIME+ | Последнее значение времени доступа к файлу не обновляется при его чтении
O_NOCITY | Терминальное устройство не получает контроля над процессом
O_NOFOLLOW | Если name - символьная ссылка, то вызов open() окончитася ошибкой
O_NONBLOCK | Открытие в неблокирующем режиме
O_SYNC | Открытие для синхронизации ввода-вывода
O_TRUC | Перезапись существующего файла

Аргумент mode используется, если создается новый файл. Он отвечает за права доступа, которые получит файл при создании. Возможные значения:

Флаг | Описание
:----|:--------------------------------------
S_IRWXU | RWX для владельца
S_IRUSR | R для владельца
S_IWUSR | W для владельца
S_IXUSR | X для владельца
S_IRWXG | RWX для группы
S_IRGRP | R для группы
S_IWGRP | W для группы
S_IXGRP | X для группы
S_IRWXO | RWX для остальных
S_IROTH | R для остальных
S_IWOTH | W для остальных
S_IXOTH | X для остальных 

## Функция creat()

Комбинация O_WRONLY | O_CREAT | O_TRUNC настолько распространена, что существует специальный системный вызов, обеспечивающий именно такое поведение:

    #include <sys/types.h>
    #include <sys/stat.h>
    #include <fcntl.h>

    int creat(const char* name, mode_t mode);


