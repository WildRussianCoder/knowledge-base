# Изменение uid и gid

## Изменение реального или сохраненного идентификатора пользователя или группы

Идентификатора пользователя или группы устанавливаются с помощью двух системных вызовов:

    #include <sys/types.h>
    #include <unistd.h>
    
    int setuid(uid_t uid);
    int setgid(gid_t gid);
    
Вызов `setuid()` устанавливает действительный идентификатор пользователя текущего процесса. Если тукущий действительный(действующий в данный момент) идентификатор пользователя данного процесса равен `0` (`root`), устанавливаются также реальный и сохраненный идентификаторы.

## Изменение действительного идентификатора пользователя или группы

    #include <sys/types.h>
    #include <unistd.h>
    
    int seteuid(uid_t euid);
    int setegid(gid_t egid);
    
Вызов `seteuid()` устанавливает действительный идентификатор пользователя равным `euid`. Пользователь `root` может установить в качестве `euid` любую величину. Пользователь без прав `root` может установить действительный идентификатор пользователя только равным реальному или сохраненному идентификатору пользователя.

В случае отсутствия прав `root` функции `seteuid()` и `setuid()` работают одинаково. Таким образом, стандартная практика - и хорошая идея - всего использовать `seteuid()`, если ваш процесс не будет выполняться от имени пользователя `root`, когда применять `setuid()` выгоднее.

## Изменение идентификаторов пользователя и группы согласно стилю BSD

    #include <sys/types.h>
    #include <unistd.h>
    
    int setreuid(uid_t ruid, uid_t euid);
    int setregid(gid_t rgid, gid_t egid);
    
Вызов `setreuid()` устанавливает реальные и действительные идентификаторы процесса равными `ruid` и `euid` соответственно. Передача величины `-1` для любого из параметром не изменит соответствующий идентификатор пользователя. Процессы без прав `root` могут только установить значение действительного идентификатора пользователя реальному или сохраненному идентификатору, а релального - действительному. 

## Изменение идентификаторов пользователя и группы согласно стилю HP-UX

    #define _GNU_SOURCE
    #include <unistd.h>
    
    int setresuid(uid_t ruid, uid_t euid, uid_t suid);
    int setresgid(gid_t rgid, gid_t egid, gid_t sgid);
    
Вызов `setresuid()` устанавливает пеальный, действительный и сохраненный идентификаторы пользователя равным `ruid`, `euid`, `suid` соответственно. Указание значения `-1` для любого из этих параметров оставит его неизменным.

**Все функции в случае успеха возвращают `0`, а в случае ошибки - `-1` и `errno`.

