# Семейство stat

UNIX предоставляет семейство функций для получения метаданных файла:

    #include <sys/types.h>
    #include <sys/stat.h>
    #include <unistd.h>

    int stat(const char* path, struct stat* buf);
    int fstat(int fd, struct stat* buf);
    int lstat(const char* path, struct stat* buf);

Каждая из этих функций возвращает информацию о файле. Функция `stat()` предоставляет информацию о файле, определенном через `path`, в то время как `fstat()` возвращает информацию о файле, представленном файловым десриптором `fd`. Функция `lstat()` идентична `stat()`, за исключение того, что в случае передачи ей символической ссылки `lstat()` возвращает информацию о самой ссылке, а не о конечном файле.

Каждая из этих функций сохраняет информацию в структуре `stat`, которая предоставляется пользователям. Структура `stat` определена в `<bits/stat.h>`, включенном в `<sys/stat.h>`.

    struct stat{
        dev_t st_dev; // Идентификатор устройства, на котором хранится файл
        ino_t st_ino; // Номер индексного дескриптора
        mode_t st_mode; // Разрешения
        nlink_t st_nlink; // Количество жестких ссылок
        uid_t st_uid; // Uid владельца
        gid_t st_gid; // Gid владельца
        dev_t st_rdev; // Идентификатор устройства (для специальных устройств)
        off_t st_size; // Общий размер в байтах
        blksize_t st_blksize; // Размер блока для ввода-вывода в файловой системе
        blkcnt_t st_blocks; // Количество выделенных блоков
        time_t st_atime; // Время последнего доступа
        time_t st_mtime; // Время последней модификации
        time_t st_ctime; // Время последнего изменения метаданных
    };