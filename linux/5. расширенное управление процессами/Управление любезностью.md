# Управление любезностью

## nice()

Linux предоставляет несколько вызовов для получения и установки значения любезности процесса. Самый простой из них - `nice()`:

    #include <unistd.h>

    int nice(int inc);

Успешная работа `nice()` увеличивает значение любезности процесса на значение `inc` и возвращает обновленную величину. Только процесс с характеристикой `CAP_SYS_NICE` (которым фактически является пользователь `root`) может установить отрицательную величину `inc`, уменьшая его значение любезности и, таким образом, повышая приоритет процесса. Следовательно, процессы без прав `root` могут только снижать свои приоритеты (увеличивая значения любезности).

В случае ошибки `nice()` возвращает `-1`. Однако из-за того, что `nice()` возвращает новое значение любезности, `-1` может быть возвращено в случае успеха. Чтобы различать успешное срабатывание и сбой, можно обнулить `errno` перед запуском, а затем проверить ее значение.

## getpriority() и setpriority()

    #include <sys/time.h>
    #include <sys/resource.h>

    int getpriority(int which, int who);
    int setpriority(int which, int who, int prio);

Эти вызовы воздействуют на процесс, группу процессов или пользователей, что определено с помощью `which` и `who`. Значение `which` должно быть `PRIO_PROCESS`, `PRIO_PGRP` или `PRIO_USER`, в то время как `who` указывает идентификатор процесса, группы процессов или идентификатор пользователя соответственно. Если значение `who` равно `0`, то вызов работает с текущим идентификатором процесса, группы процессов или идентификатором пользователя соответственно.

