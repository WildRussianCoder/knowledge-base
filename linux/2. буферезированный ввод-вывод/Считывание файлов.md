# Считывание из потока данных

## Считывание одного символа в момент времени

Функция `fgetc()` используется для считывания отедльного симола из потока данных:

    #include <stdio.h>

    int fgetc(FILE* stream);

Эта функция считывает следующий символ из `stream` и возвращает его как `unsigned char`, приведенный к `int`. Возвращаемое значение `fgetc()` должно быть сохранено в `int`. Сохранение в `char` - распространенный и опасный промах, ведь в таком случае вы не можете обнаружить ошибки.

## Возврат символа в поток данных

    #include <stdio.h>

    int ungetc(int c, FILE* stream);

В случае успеха возвращается символ `c`, который мы отправили в поток. В случае ошибки - `EOF`.

## Считывание целой строки

Функция `fgets()` считывает строку из указанного потока данных:

    #include <stdio.h>

    char* fgets(char* str, int size, FILE* stream);

Эта функция может считать из потока данных `stream` количество байтов, как максимум *на один меньше*, чем количество `size` байт. Результат считывания сохраняется в `str`. Символ нуля сохраняется в буфере после последнего считанного байта. Считывание прекращается, когда достигнут конец файла или первый символ новой строки. Если начинается считывание новой строки, то в `str` сохраняется `\n`. 

В случае успеха возвращается `str`, в случае ошибки - `NULL`.

## Считывание двоичных данных

    #include <stdio.h>

    size_t fread(void* buf, size_t size, size_t nr, FILE* stream);

При вызове `fread()` мы можем прочитать вплоть до `nr` фрагментов данных, каждый размером `size` байт. Считывание происходит из потока данных `stream` в буфер, указанный `buf`. Значение файлового указателя увеличивается на число, равное количеству прочитанных байтов.

**Возвращается количество считанных элементов, но не количество считанных байтов!**. При ошибке или достижении конца файла функция возвращает значение, меньшее чем `nr`. 